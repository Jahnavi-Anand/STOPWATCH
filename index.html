<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STOPWATCH</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="stopwatch">
    <h1 style="color: white;" id="displayTime">00:00:00</h1>
    <div class="stopped-value" id="stoppedValueDisplay"></div>
    <div class="buttons">
        <img src="images/stop.png" onclick="watchStop()">
        <img src="images/start.png" onclick="watchStart()">
        <img src="images/reset.png" onclick="watchReset()">
        <img src="images/store.jpeg" onclick="storeStop()">
    </div>
    <div class="stored-time" style="position: absolute; top: 10px; right: 10px; color: white;">
        Stored Time: <span id="storedTimeDisplay">00:00:00</span>
    </div>
  </div>  

  <script>
    let[seconds,minutes,hours]=[0,0,0];
    let displayTime=document.getElementById("displayTime");
    let stoppedValueDisplay=document.getElementById("stoppedValueDisplay");
    let storedTimeDisplay=document.getElementById("storedTimeDisplay");
    let timer=null;
    let storedValues=[];

    function stopwatch(){
    seconds++;
    if (seconds==60) {
        seconds=0;
        minutes++;
        if (minutes==60) {
            minutes=0;
            hours++;
        }
    }

    let h=hours<10?"0"+hours:hours;
    let m=minutes<10?"0"+minutes:minutes;
    let s=seconds<10?"0"+seconds:seconds;

    displayTime.innerHTML=h+":"+m+":"+s;
}

    function storeStop(){
        if (storedValues.length>=15){
            alert("Storing Limit Exceeds");
            return;
        }
        storedValues.push({
            hours:hours,
            minutes:minutes,
            seconds:seconds
        });
        updateStoredTimeDisplay();
    }

    function updateStoredTimeDisplay(){
        if (storedValues.length>0) {
            let tableContent="<table>";
            for (let i = 0; i < storedValues.length; i++) {
            let h=storedValues[i].hours<10?"0"+storedValues[i].hours:storedValues[i].hours;
            let m=storedValues[i].minutes<10?"0"+storedValues[i].minutes:storedValues[i].minutes;
            let s=storedValues[i].seconds<10?"0"+storedValues[i].seconds:storedValues[i].seconds;

            tableContent += `<tr><td>${h}:${m}:${s}   </td></tr>`;
        }
        tableContent += "</table>";
        storedTimeDisplay.innerHTML=tableContent;
        }else {
        storedTimeDisplay.innerHTML = "00:00:00"; 
    }
    }

    function watchStart(){
        if (timer!==null){
            clearInterval(timer);
        }
        if (storedValues.length>0) {
            hours=storedValues[storedValues.length-1].hours;
            minutes=storedValues[storedValues.length-1].minutes;
            seconds=storedValues[storedValues.length-1].seconds;
            storedValues=[];
            updateStoredTimeDisplay();
        }

        timer=setInterval(stopwatch,1000);
    }

    function watchStop(){
        clearInterval(timer);
        clearInterval(timer);
        displayStoppedValue();
    }

    function watchReset(){
        clearInterval(timer);
        [seconds,minutes,hours]=[0,0,0];
        displayTime.innerHTML="00:00:00";
        stoppedValueDisplay.innerHTML="";
        storedValues=[];
        updateStoredTimeDisplay();
    }

    function displayStoppedValue() {
        if (storedValues !== null) {
            let h = storedValues[storedValues.length-1].hours < 10 ? "0" + storedValues[storedValues.length-1].hours : storedValues[storedValues.length-1].hours;
            let m = storedValues[storedValues.length-1].minutes < 10 ? "0" + storedValues[storedValues.length-1].minutes : storedValues[storedValues.length-1].minutes;
            let s = storedValues[storedValues.length-1].seconds < 10 ? "0" + storedValues[storedValues.length-1].seconds : storedValues[storedValues.length-1].seconds;

            stoppedValueDisplay.innerHTML="Stopped Time: "+h+":"+m+":"+s;
        }
    }
  </script>
</body>
</html>
